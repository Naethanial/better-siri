# OnShape Agent Test Suite

This folder contains an Onshape-backed evaluation harness for iterating on the "interpret drawings -> build models" capability.

## Prereqs

- Onshape OAuth token present at:
  `~/Library/Application Support/BetterSiri/OnShape/oauth_token.json`
  (generated by the app: Settings -> OnShape).

If your token is expired/invalid, either:

- Re-authorize in the app (Settings -> OnShape), or
- Export OAuth refresh credentials so the agent can refresh automatically:
  - `ONSHAPE_OAUTH_CLIENT_ID`
  - `ONSHAPE_OAUTH_CLIENT_SECRET`

## Running

Run deterministic (no-LLM) smoke cases:

```bash
python3 scripts/onshape_agent_tests/run_suite.py --kind direct
```

Run LLM-driven cases (requires OpenRouter key):

```bash
export OPENROUTER_API_KEY='...'
export OPENROUTER_MODEL='openai/gpt-4o-mini'  # or your preferred multimodal model
python3 scripts/onshape_agent_tests/run_suite.py --kind llm
```

Override the target Part Studio via URL:

```bash
export ONSHAPE_TEST_URL='https://.../documents/.../w/.../e/...'
python3 scripts/onshape_agent_tests/run_suite.py
```

Artifacts and reports are written under:

`scripts/onshape_agent_tests/runs/<timestamp>/`
